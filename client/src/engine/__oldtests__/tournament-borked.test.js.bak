import { getForcedAction, advanceHand, calculateHandWinners } from ".";
import { rebalanceTables } from "./tournament";
import { TournamentDirective } from "./types";

const dummyTournament = {
  winners: [
    { percent: 0.8, rank: 0 },
    { percent: 0.2, rank: 1 },
  ],
  organizerCode: "nicholas123",
  startingStack: 1000,
  type: "tournament",
  prng: "mulberry32",
  buyIn: 20,
  hostedMedia: "mediasoup",
  rebuysThroughRound: -1,
  tables: [
    {
      increment: 1,
      type: "tournament",
      prng: "mulberry32",
      buyIn: 20,
      hostedMedia: "mediasoup",
      mediasoupHost: "n0.media.pokerinplace.app",
      organizerId: "Pm2AMPmJtXaciNSBKSQiXx99a2r2",
      stage: "active",
      name: "Tournament Table #1",
      timestamp: 1596825179445,
      id: "oXZVJGJKqo9EpeCbaztX",
      currentBigBlind: 50000,
      activeHandId: null,
      players: {
        Pm2AMPmJtXaciNSBKSQiXx99a2r2_1: {
          stack: 1000,
          role: "player",
          active: true,
          photoURL: "/avatars/9.jpg",
          name: "1",
          position: 4,
          id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_1",
          email: "nick@pokerinplace.app",
          contributed: 20,
        },
        Pm2AMPmJtXaciNSBKSQiXx99a2r2: {
          stack: 1000,
          role: "player",
          active: true,
          photoURL:
            "https://lh4.googleusercontent.com/-L-pJusDSu70/AAAAAAAAAAI/AAAAAAAAAAA/AAKWJJPvyrLFRor2oAtfUgWCxYpqhfEutw/photo.jpg",
          name: "Nicholas Clark",
          position: 6,
          id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2",
          email: "nick@pokerinplace.app",
          contributed: 20,
        },
        Pm2AMPmJtXaciNSBKSQiXx99a2r2_4: {
          role: "player",
          photoURL: "/avatars/12.jpg",
          name: "4",
          position: 0,
          id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_4",
          email: "nick@pokerinplace.app",
          contributed: 20,
          stack: 0,
          active: false,
          removed: true,
          bustedTimestamp: 1596825210740,
        },
        Pm2AMPmJtXaciNSBKSQiXx99a2r2_9: {
          stack: 1000,
          role: "player",
          active: true,
          photoURL: "/avatars/21.jpg",
          name: "9",
          position: 5,
          id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_9",
          email: "nick@pokerinplace.app",
          contributed: 20,
          removed: true,
        },
        Pm2AMPmJtXaciNSBKSQiXx99a2r2_8: {
          role: "player",
          active: true,
          photoURL: "/avatars/18.jpg",
          name: "8",
          position: 1,
          id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_8",
          email: "nick@pokerinplace.app",
          contributed: 20,
          stack: 2000,
        },
        Pm2AMPmJtXaciNSBKSQiXx99a2r2_2: {
          role: "player",
          photoURL: "/avatars/10.jpg",
          name: "2",
          position: 2,
          id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_2",
          email: "nick@pokerinplace.app",
          contributed: 20,
          stack: 0,
          active: false,
          bustedTimestamp: 1596825270951,
        },
        Pm2AMPmJtXaciNSBKSQiXx99a2r2_0: {
          role: "player",
          active: true,
          photoURL: "/avatars/23.jpg",
          name: "0",
          position: 3,
          id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_0",
          email: "nick@pokerinplace.app",
          contributed: 20,
          stack: 2000,
        },
      },
      tournamentDetails: {
        winners: [
          { percent: 0.8, rank: 0 },
          { percent: 0.2, rank: 1 },
        ],
        organizerCode: "nicholas123",
        startingStack: 1000,
        type: "tournament",
        prng: "mulberry32",
        buyIn: 20,
        hostedMedia: "mediasoup",
        rebuysThroughRound: -1,
        tables: [],
        payType: "up-front",
        organizerId: "Pm2AMPmJtXaciNSBKSQiXx99a2r2",
        name: "Video Poker Game",
        roundInterval: 20,
        paymentId: "free",
        paymentType: "free",
        tableIds: ["oXZVJGJKqo9EpeCbaztX", "wazxdRmkL34T8kwtKc38"],
        activeRoundId: 0,
        rounds: [
          {
            bigBlind: 50000,
            roundIndex: 0,
            id: 0,
            timestamp: 1596825179732,
          },
        ],
        pauseDuration: 0,
        pauseReason: "table-balancing",
        pauseMessage: "Tables are rebalancing...",
        players: {
          Pm2AMPmJtXaciNSBKSQiXx99a2r2_1: {
            stack: 1000,
            role: "player",
            active: true,
            photoURL: "/avatars/9.jpg",
            name: "1",
            position: -1,
            id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_1",
            email: "nick@pokerinplace.app",
            contributed: 20,
            tableId: "oXZVJGJKqo9EpeCbaztX",
            bustedTimestamp: null,
          },
          Pm2AMPmJtXaciNSBKSQiXx99a2r2: {
            stack: 1000,
            role: "player",
            active: true,
            photoURL:
              "https://lh4.googleusercontent.com/-L-pJusDSu70/AAAAAAAAAAI/AAAAAAAAAAA/AAKWJJPvyrLFRor2oAtfUgWCxYpqhfEutw/photo.jpg",
            name: "Nicholas Clark",
            position: -1,
            id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2",
            email: "nick@pokerinplace.app",
            contributed: 20,
            tableId: "oXZVJGJKqo9EpeCbaztX",
            bustedTimestamp: null,
          },
          Pm2AMPmJtXaciNSBKSQiXx99a2r2_3: {
            stack: 1000,
            role: "player",
            active: true,
            photoURL: "/avatars/1.jpg",
            name: "3",
            position: -1,
            id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_3",
            email: "nick@pokerinplace.app",
            contributed: 20,
            tableId: "wazxdRmkL34T8kwtKc38",
            bustedTimestamp: null,
          },
          Pm2AMPmJtXaciNSBKSQiXx99a2r2_4: {
            role: "player",
            active: true,
            photoURL: "/avatars/12.jpg",
            name: "4",
            position: -1,
            id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_4",
            email: "nick@pokerinplace.app",
            contributed: 20,
            stack: 0,
            removed: true,
            tableId: null,
            bustedTimestamp: 1596825210740,
          },
          Pm2AMPmJtXaciNSBKSQiXx99a2r2_10: {
            role: "player",
            active: true,
            photoURL: "/avatars/7.jpg",
            name: "10",
            position: -1,
            id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_10",
            email: "nick@pokerinplace.app",
            contributed: 20,
            stack: 0,
            removed: true,
            tableId: null,
            bustedTimestamp: 1596825210740,
          },
          Pm2AMPmJtXaciNSBKSQiXx99a2r2_6: {
            role: "player",
            active: true,
            photoURL: "/avatars/19.jpg",
            name: "6",
            position: -1,
            id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_6",
            email: "nick@pokerinplace.app",
            contributed: 20,
            stack: 0,
            removed: true,
            tableId: null,
            bustedTimestamp: 1596825232324,
          },
          Pm2AMPmJtXaciNSBKSQiXx99a2r2_9: {
            stack: 1000,
            role: "player",
            active: true,
            photoURL: "/avatars/21.jpg",
            name: "9",
            position: -1,
            id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_9",
            email: "nick@pokerinplace.app",
            contributed: 20,
            bustedTimestamp: null,
            tableId: "wazxdRmkL34T8kwtKc38",
          },
          Pm2AMPmJtXaciNSBKSQiXx99a2r2_8: {
            role: "player",
            active: true,
            photoURL: "/avatars/18.jpg",
            name: "8",
            position: -1,
            id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_8",
            email: "nick@pokerinplace.app",
            contributed: 20,
            tableId: "oXZVJGJKqo9EpeCbaztX",
            bustedTimestamp: null,
            stack: 2000,
          },
          Pm2AMPmJtXaciNSBKSQiXx99a2r2_5: {
            role: "player",
            active: true,
            photoURL: "/avatars/17.jpg",
            name: "5",
            position: -1,
            id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_5",
            email: "nick@pokerinplace.app",
            contributed: 20,
            stack: 0,
            removed: true,
            tableId: null,
            bustedTimestamp: 1596825252764,
          },
          Pm2AMPmJtXaciNSBKSQiXx99a2r2_11: {
            role: "player",
            active: true,
            photoURL: "/avatars/13.jpg",
            name: "11",
            position: -1,
            id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_11",
            email: "nick@pokerinplace.app",
            contributed: 20,
            tableId: "wazxdRmkL34T8kwtKc38",
            bustedTimestamp: null,
            stack: 5000,
          },
          Pm2AMPmJtXaciNSBKSQiXx99a2r2_7: {
            role: "player",
            active: true,
            photoURL: "/avatars/15.jpg",
            name: "7",
            position: -1,
            id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_7",
            email: "nick@pokerinplace.app",
            contributed: 20,
            tableId: "wazxdRmkL34T8kwtKc38",
            stack: 0,
            bustedTimestamp: 1596825270276,
          },
          Pm2AMPmJtXaciNSBKSQiXx99a2r2_2: {
            role: "player",
            active: true,
            photoURL: "/avatars/10.jpg",
            name: "2",
            position: -1,
            id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_2",
            email: "nick@pokerinplace.app",
            contributed: 20,
            tableId: "oXZVJGJKqo9EpeCbaztX",
            stack: 0,
            bustedTimestamp: 1596825270951,
          },
          Pm2AMPmJtXaciNSBKSQiXx99a2r2_0: {
            role: "player",
            active: true,
            photoURL: "/avatars/23.jpg",
            name: "0",
            position: -1,
            id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_0",
            email: "nick@pokerinplace.app",
            contributed: 20,
            tableId: "oXZVJGJKqo9EpeCbaztX",
            bustedTimestamp: null,
            stack: 2000,
          },
        },
        pauseEndTimestamp: 1596825270970,
        status: "paused",
      },
      hands: [],
    },
    {
      increment: 1,
      type: "tournament",
      prng: "mulberry32",
      buyIn: 20,
      hostedMedia: "mediasoup",
      mediasoupHost: "n0.media.pokerinplace.app",
      organizerId: "Pm2AMPmJtXaciNSBKSQiXx99a2r2",
      stage: "active",
      name: "Tournament Table #2",
      timestamp: 1596825179455,
      id: "wazxdRmkL34T8kwtKc38",
      currentBigBlind: 50000,
      activeHandId: null,
      players: {
        Pm2AMPmJtXaciNSBKSQiXx99a2r2_3: {
          stack: 1000,
          role: "player",
          active: true,
          photoURL: "/avatars/1.jpg",
          name: "3",
          position: 5,
          id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_3",
          email: "nick@pokerinplace.app",
          contributed: 20,
        },
        Pm2AMPmJtXaciNSBKSQiXx99a2r2_10: {
          role: "player",
          photoURL: "/avatars/7.jpg",
          name: "10",
          position: 1,
          id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_10",
          email: "nick@pokerinplace.app",
          contributed: 20,
          stack: 0,
          active: false,
          removed: true,
          bustedTimestamp: 1596825210740,
        },
        Pm2AMPmJtXaciNSBKSQiXx99a2r2_6: {
          role: "player",
          photoURL: "/avatars/19.jpg",
          name: "6",
          position: 3,
          id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_6",
          email: "nick@pokerinplace.app",
          contributed: 20,
          stack: 0,
          active: false,
          removed: true,
          bustedTimestamp: 1596825232324,
        },
        Pm2AMPmJtXaciNSBKSQiXx99a2r2_9: {
          stack: 1000,
          role: "player",
          active: true,
          photoURL: "/avatars/21.jpg",
          name: "9",
          position: 6,
          id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_9",
          email: "nick@pokerinplace.app",
          contributed: 20,
        },
        Pm2AMPmJtXaciNSBKSQiXx99a2r2_5: {
          role: "player",
          photoURL: "/avatars/17.jpg",
          name: "5",
          position: 0,
          id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_5",
          email: "nick@pokerinplace.app",
          contributed: 20,
          stack: 0,
          active: false,
          removed: true,
          bustedTimestamp: 1596825252764,
        },
        Pm2AMPmJtXaciNSBKSQiXx99a2r2_11: {
          role: "player",
          active: true,
          photoURL: "/avatars/13.jpg",
          name: "11",
          position: 2,
          id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_11",
          email: "nick@pokerinplace.app",
          contributed: 20,
          stack: 5000,
        },
        Pm2AMPmJtXaciNSBKSQiXx99a2r2_7: {
          role: "player",
          photoURL: "/avatars/15.jpg",
          name: "7",
          position: 4,
          id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_7",
          email: "nick@pokerinplace.app",
          contributed: 20,
          stack: 0,
          active: false,
          bustedTimestamp: 1596825270276,
        },
      },
      tournamentDetails: {
        winners: [
          { percent: 0.8, rank: 0 },
          { percent: 0.2, rank: 1 },
        ],
        organizerCode: "nicholas123",
        startingStack: 1000,
        type: "tournament",
        prng: "mulberry32",
        buyIn: 20,
        hostedMedia: "mediasoup",
        rebuysThroughRound: -1,
        tables: [],
        payType: "up-front",
        organizerId: "Pm2AMPmJtXaciNSBKSQiXx99a2r2",
        name: "Video Poker Game",
        roundInterval: 20,
        paymentId: "free",
        paymentType: "free",
        tableIds: ["oXZVJGJKqo9EpeCbaztX", "wazxdRmkL34T8kwtKc38"],
        activeRoundId: 0,
        rounds: [
          {
            bigBlind: 50000,
            roundIndex: 0,
            id: 0,
            timestamp: 1596825179732,
          },
        ],
        pauseDuration: 0,
        pauseReason: "table-balancing",
        pauseMessage: "Tables are rebalancing...",
        players: {
          Pm2AMPmJtXaciNSBKSQiXx99a2r2_1: {
            stack: 1000,
            role: "player",
            active: true,
            photoURL: "/avatars/9.jpg",
            name: "1",
            position: -1,
            id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_1",
            email: "nick@pokerinplace.app",
            contributed: 20,
            tableId: "oXZVJGJKqo9EpeCbaztX",
            bustedTimestamp: null,
          },
          Pm2AMPmJtXaciNSBKSQiXx99a2r2: {
            stack: 1000,
            role: "player",
            active: true,
            photoURL:
              "https://lh4.googleusercontent.com/-L-pJusDSu70/AAAAAAAAAAI/AAAAAAAAAAA/AAKWJJPvyrLFRor2oAtfUgWCxYpqhfEutw/photo.jpg",
            name: "Nicholas Clark",
            position: -1,
            id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2",
            email: "nick@pokerinplace.app",
            contributed: 20,
            tableId: "oXZVJGJKqo9EpeCbaztX",
            bustedTimestamp: null,
          },
          Pm2AMPmJtXaciNSBKSQiXx99a2r2_3: {
            stack: 1000,
            role: "player",
            active: true,
            photoURL: "/avatars/1.jpg",
            name: "3",
            position: -1,
            id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_3",
            email: "nick@pokerinplace.app",
            contributed: 20,
            tableId: "wazxdRmkL34T8kwtKc38",
            bustedTimestamp: null,
          },
          Pm2AMPmJtXaciNSBKSQiXx99a2r2_4: {
            role: "player",
            active: true,
            photoURL: "/avatars/12.jpg",
            name: "4",
            position: -1,
            id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_4",
            email: "nick@pokerinplace.app",
            contributed: 20,
            stack: 0,
            removed: true,
            tableId: null,
            bustedTimestamp: 1596825210740,
          },
          Pm2AMPmJtXaciNSBKSQiXx99a2r2_10: {
            role: "player",
            active: true,
            photoURL: "/avatars/7.jpg",
            name: "10",
            position: -1,
            id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_10",
            email: "nick@pokerinplace.app",
            contributed: 20,
            stack: 0,
            removed: true,
            tableId: null,
            bustedTimestamp: 1596825210740,
          },
          Pm2AMPmJtXaciNSBKSQiXx99a2r2_6: {
            role: "player",
            active: true,
            photoURL: "/avatars/19.jpg",
            name: "6",
            position: -1,
            id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_6",
            email: "nick@pokerinplace.app",
            contributed: 20,
            stack: 0,
            removed: true,
            tableId: null,
            bustedTimestamp: 1596825232324,
          },
          Pm2AMPmJtXaciNSBKSQiXx99a2r2_9: {
            stack: 1000,
            role: "player",
            active: true,
            photoURL: "/avatars/21.jpg",
            name: "9",
            position: -1,
            id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_9",
            email: "nick@pokerinplace.app",
            contributed: 20,
            bustedTimestamp: null,
            tableId: "wazxdRmkL34T8kwtKc38",
          },
          Pm2AMPmJtXaciNSBKSQiXx99a2r2_8: {
            role: "player",
            active: true,
            photoURL: "/avatars/18.jpg",
            name: "8",
            position: -1,
            id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_8",
            email: "nick@pokerinplace.app",
            contributed: 20,
            tableId: "oXZVJGJKqo9EpeCbaztX",
            bustedTimestamp: null,
            stack: 2000,
          },
          Pm2AMPmJtXaciNSBKSQiXx99a2r2_5: {
            role: "player",
            active: true,
            photoURL: "/avatars/17.jpg",
            name: "5",
            position: -1,
            id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_5",
            email: "nick@pokerinplace.app",
            contributed: 20,
            stack: 0,
            removed: true,
            tableId: null,
            bustedTimestamp: 1596825252764,
          },
          Pm2AMPmJtXaciNSBKSQiXx99a2r2_11: {
            role: "player",
            active: true,
            photoURL: "/avatars/13.jpg",
            name: "11",
            position: -1,
            id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_11",
            email: "nick@pokerinplace.app",
            contributed: 20,
            tableId: "wazxdRmkL34T8kwtKc38",
            bustedTimestamp: null,
            stack: 5000,
          },
          Pm2AMPmJtXaciNSBKSQiXx99a2r2_7: {
            role: "player",
            active: true,
            photoURL: "/avatars/15.jpg",
            name: "7",
            position: -1,
            id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_7",
            email: "nick@pokerinplace.app",
            contributed: 20,
            tableId: "wazxdRmkL34T8kwtKc38",
            stack: 0,
            bustedTimestamp: 1596825270276,
          },
          Pm2AMPmJtXaciNSBKSQiXx99a2r2_2: {
            role: "player",
            active: true,
            photoURL: "/avatars/10.jpg",
            name: "2",
            position: -1,
            id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_2",
            email: "nick@pokerinplace.app",
            contributed: 20,
            tableId: "oXZVJGJKqo9EpeCbaztX",
            stack: 0,
            bustedTimestamp: 1596825270951,
          },
          Pm2AMPmJtXaciNSBKSQiXx99a2r2_0: {
            role: "player",
            active: true,
            photoURL: "/avatars/23.jpg",
            name: "0",
            position: -1,
            id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_0",
            email: "nick@pokerinplace.app",
            contributed: 20,
            tableId: "oXZVJGJKqo9EpeCbaztX",
            bustedTimestamp: null,
            stack: 2000,
          },
        },
        pauseEndTimestamp: 1596825270970,
        status: "paused",
      },
      hands: [],
    },
  ],
  payType: "up-front",
  organizerId: "Pm2AMPmJtXaciNSBKSQiXx99a2r2",
  name: "Video Poker Game",
  roundInterval: 20,
  paymentId: "free",
  paymentType: "free",
  tableIds: ["oXZVJGJKqo9EpeCbaztX", "wazxdRmkL34T8kwtKc38"],
  activeRoundId: 0,
  rounds: [
    {
      bigBlind: 50000,
      roundIndex: 0,
      id: 0,
      timestamp: 1596825179732,
    },
  ],
  pauseDuration: 0,
  pauseReason: "table-balancing",
  pauseMessage: "Tables are rebalancing...",
  players: {
    Pm2AMPmJtXaciNSBKSQiXx99a2r2_1: {
      stack: 1000,
      role: "player",
      active: true,
      photoURL: "/avatars/9.jpg",
      name: "1",
      position: -1,
      id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_1",
      email: "nick@pokerinplace.app",
      contributed: 20,
      tableId: "oXZVJGJKqo9EpeCbaztX",
      bustedTimestamp: null,
    },
    Pm2AMPmJtXaciNSBKSQiXx99a2r2: {
      stack: 1000,
      role: "player",
      active: true,
      photoURL:
        "https://lh4.googleusercontent.com/-L-pJusDSu70/AAAAAAAAAAI/AAAAAAAAAAA/AAKWJJPvyrLFRor2oAtfUgWCxYpqhfEutw/photo.jpg",
      name: "Nicholas Clark",
      position: -1,
      id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2",
      email: "nick@pokerinplace.app",
      contributed: 20,
      tableId: "oXZVJGJKqo9EpeCbaztX",
      bustedTimestamp: null,
    },
    Pm2AMPmJtXaciNSBKSQiXx99a2r2_3: {
      stack: 1000,
      role: "player",
      active: true,
      photoURL: "/avatars/1.jpg",
      name: "3",
      position: -1,
      id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_3",
      email: "nick@pokerinplace.app",
      contributed: 20,
      tableId: "wazxdRmkL34T8kwtKc38",
      bustedTimestamp: null,
    },
    Pm2AMPmJtXaciNSBKSQiXx99a2r2_4: {
      role: "player",
      active: true,
      photoURL: "/avatars/12.jpg",
      name: "4",
      position: -1,
      id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_4",
      email: "nick@pokerinplace.app",
      contributed: 20,
      stack: 0,
      removed: true,
      tableId: null,
      bustedTimestamp: 1596825210740,
    },
    Pm2AMPmJtXaciNSBKSQiXx99a2r2_10: {
      role: "player",
      active: true,
      photoURL: "/avatars/7.jpg",
      name: "10",
      position: -1,
      id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_10",
      email: "nick@pokerinplace.app",
      contributed: 20,
      stack: 0,
      removed: true,
      tableId: null,
      bustedTimestamp: 1596825210740,
    },
    Pm2AMPmJtXaciNSBKSQiXx99a2r2_6: {
      role: "player",
      active: true,
      photoURL: "/avatars/19.jpg",
      name: "6",
      position: -1,
      id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_6",
      email: "nick@pokerinplace.app",
      contributed: 20,
      stack: 0,
      removed: true,
      tableId: null,
      bustedTimestamp: 1596825232324,
    },
    Pm2AMPmJtXaciNSBKSQiXx99a2r2_9: {
      stack: 1000,
      role: "player",
      active: true,
      photoURL: "/avatars/21.jpg",
      name: "9",
      position: -1,
      id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_9",
      email: "nick@pokerinplace.app",
      contributed: 20,
      bustedTimestamp: null,
      tableId: "wazxdRmkL34T8kwtKc38",
    },
    Pm2AMPmJtXaciNSBKSQiXx99a2r2_8: {
      role: "player",
      active: true,
      photoURL: "/avatars/18.jpg",
      name: "8",
      position: -1,
      id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_8",
      email: "nick@pokerinplace.app",
      contributed: 20,
      tableId: "oXZVJGJKqo9EpeCbaztX",
      bustedTimestamp: null,
      stack: 2000,
    },
    Pm2AMPmJtXaciNSBKSQiXx99a2r2_5: {
      role: "player",
      active: true,
      photoURL: "/avatars/17.jpg",
      name: "5",
      position: -1,
      id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_5",
      email: "nick@pokerinplace.app",
      contributed: 20,
      stack: 0,
      removed: true,
      tableId: null,
      bustedTimestamp: 1596825252764,
    },
    Pm2AMPmJtXaciNSBKSQiXx99a2r2_11: {
      role: "player",
      active: true,
      photoURL: "/avatars/13.jpg",
      name: "11",
      position: -1,
      id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_11",
      email: "nick@pokerinplace.app",
      contributed: 20,
      tableId: "wazxdRmkL34T8kwtKc38",
      bustedTimestamp: null,
      stack: 5000,
    },
    Pm2AMPmJtXaciNSBKSQiXx99a2r2_7: {
      role: "player",
      active: true,
      photoURL: "/avatars/15.jpg",
      name: "7",
      position: -1,
      id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_7",
      email: "nick@pokerinplace.app",
      contributed: 20,
      tableId: "wazxdRmkL34T8kwtKc38",
      stack: 0,
      bustedTimestamp: 1596825270276,
    },
    Pm2AMPmJtXaciNSBKSQiXx99a2r2_2: {
      role: "player",
      active: true,
      photoURL: "/avatars/10.jpg",
      name: "2",
      position: -1,
      id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_2",
      email: "nick@pokerinplace.app",
      contributed: 20,
      tableId: "oXZVJGJKqo9EpeCbaztX",
      stack: 0,
      bustedTimestamp: 1596825270951,
    },
    Pm2AMPmJtXaciNSBKSQiXx99a2r2_0: {
      role: "player",
      active: true,
      photoURL: "/avatars/23.jpg",
      name: "0",
      position: -1,
      id: "Pm2AMPmJtXaciNSBKSQiXx99a2r2_0",
      email: "nick@pokerinplace.app",
      contributed: 20,
      tableId: "oXZVJGJKqo9EpeCbaztX",
      bustedTimestamp: null,
      stack: 2000,
    },
  },
  pauseEndTimestamp: 1596825270970,
  status: "paused",
};

describe("Tournament rebalancing", () => {
  it("Should not process.exit", () => {
    const result = rebalanceTables(dummyTournament);
    expect(result).toContainEqual({
      directive: TournamentDirective.EliminatePlayer,
      data: { playerId: "1", tableId: "1" },
    });
  });
});
